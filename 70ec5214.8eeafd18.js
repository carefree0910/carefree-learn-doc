(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{109:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return u}));var a=t(0),r=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=r.a.createContext({}),b=function(e){var n=r.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},s=function(e){var n=b(e.components);return r.a.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},d=r.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),s=b(t),d=a,u=s["".concat(i,".").concat(d)]||s[d]||m[d]||o;return t?r.a.createElement(u,c(c({ref:n},p),{},{components:t})):r.a.createElement(u,c({ref:n},p))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var p=2;p<o;p++)i[p]=t[p];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},89:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"rightToc",(function(){return l})),t.d(n,"default",(function(){return b}));var a=t(3),r=t(7),o=(t(0),t(109)),i={id:"mlflow",title:"mlflow Integration"},c={unversionedId:"user-guides/mlflow",id:"user-guides/mlflow",isDocsHomePage:!1,title:"mlflow Integration",description:"This section is a work in progress.",source:"@site/docs/user-guides/mlflow.md",slug:"/user-guides/mlflow",permalink:"/carefree-learn-doc/docs/user-guides/mlflow",version:"current",lastUpdatedAt:1608119419,sidebar:"docs",previous:{title:"Production",permalink:"/carefree-learn-doc/docs/user-guides/production"},next:{title:"Build Your Own Models",permalink:"/carefree-learn-doc/docs/developer-guides/customization"}},l=[{value:"Project Component",id:"project-component",children:[]},{value:"Tracking Component",id:"tracking-component",children:[]},{value:"Model Component",id:"model-component",children:[]}],p={rightToc:l};function b(e){var n=e.components,t=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(o.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(o.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"This section is a work in progress."))),Object(o.b)("p",null,Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://mlflow.org"}),Object(o.b)("inlineCode",{parentName:"a"},"mlflow"))," is an open source platform for the machine learning lifecycle. Here are the main features supported (these descriptions are copied from the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://mlflow.org/docs/latest/index.html"}),"official documentation")," of ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://mlflow.org"}),Object(o.b)("inlineCode",{parentName:"a"},"mlflow")),"):"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"MLflow Tracking"),". The MLflow Tracking component is an API and UI for logging parameters, code versions, metrics, and output files when running your machine learning code and for later visualizing the results. MLflow Tracking lets you log and query experiments using Python API."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"MLflow Projects"),". An MLflow Project is a format for packaging data science code in a reusable and reproducible way, based primarily on conventions. In addition, the Projects component includes an API and command-line tools for running projects, making it possible to chain together projects into workflows."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"MLflow Models"),". An MLflow Model is a standard format for packaging machine learning models that can be used in a variety of downstream tools\u2014for example, real-time serving through a REST API or batch inference on Apache Spark. The format defines a convention that lets you save a model in different \u201cflavors\u201d that can be understood by different downstream tools.")),Object(o.b)("h2",{id:"project-component"},"Project Component"),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"carefree-learn")," itself is served as an ",Object(o.b)("strong",{parentName:"p"},"MLflow Project"),", as you can find a ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/carefree0910/carefree-learn/blob/dev/MLproject"}),Object(o.b)("inlineCode",{parentName:"a"},"MLproject"))," file in the root directory. We've registered some common use cases as command-line tools (e.g. basic training, inference and unittesting), so once you've installed ",Object(o.b)("inlineCode",{parentName:"p"},"conda")," and ",Object(o.b)("inlineCode",{parentName:"p"},"mlflow"),", you can play with it by running the following command anywhere you like:"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"mlflow run https://github.com/carefree0910/carefree-learn -e test -v dev\n")),Object(o.b)("p",null,"What's going under the hood is:"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("inlineCode",{parentName:"li"},"mlflow")," will install a conda environment with ",Object(o.b)("inlineCode",{parentName:"li"},"carefree-learn")," (dev branch) for you."),Object(o.b)("li",{parentName:"ol"},"The CLI defined in ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/carefree0910/carefree-learn/blob/dev/MLproject"}),Object(o.b)("inlineCode",{parentName:"a"},"MLproject"))," will execute the ",Object(o.b)("inlineCode",{parentName:"li"},"pytest -v --cov")," command (as shown ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"https://github.com/carefree0910/carefree-learn/blob/dev/MLproject#L65"}),"here"),").")),Object(o.b)("h2",{id:"tracking-component"},"Tracking Component"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Tracking")," can be enabled easily in by specifying ",Object(o.b)("inlineCode",{parentName:"p"},"mlflow_config")," (an empty ",Object(o.b)("inlineCode",{parentName:"p"},"dict")," will be enough):"),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"import cflearn\nimport numpy as np\n\nx = np.random.random([1000, 10])\ny = np.random.random([1000, 1])\nm = cflearn.make(mlflow_config={}).fit(x, y)\n")),Object(o.b)("p",null,"After which, we can execute ",Object(o.b)("inlineCode",{parentName:"p"},"mlflow ui")," in the current working directory to inspect the tracking results (e.g. loss curve, metric curve, etc.)."),Object(o.b)("h2",{id:"model-component"},"Model Component"),Object(o.b)("p",null,"If we want to serve our models, we can enable the ",Object(o.b)("strong",{parentName:"p"},"Model")," component by specifying ",Object(o.b)("inlineCode",{parentName:"p"},"production")),Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-python"}),"import cflearn\nimport numpy as np\n\nx = np.random.random([1000, 10])\ny = np.random.random([1000, 1])\nm = cflearn.make(production=...).fit(x, y)\n")),Object(o.b)("p",null,"where"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},'production="pack"')," means ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"production"}),Object(o.b)("inlineCode",{parentName:"a"},"cflearn.Pack"))," will be used as the serialzing backend."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},'production="pipeline"')," means ",Object(o.b)("a",Object(a.a)({parentName:"li"},{href:"apis#save"}),Object(o.b)("inlineCode",{parentName:"a"},"cflearn.save"))," will be used as the serialzing backend.")))}b.isMDXComponent=!0}}]);